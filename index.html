<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <meta charset="utf-8">
  <title>Mashape Query</title>
</head>
<body>

  <button onclick="search()">Run the request</button>
  <div id="output">The API request is:</div>
  <img id="card" onclick="displayName()" src="img_pulpitrock.jpg" alt="Pulpit Rock" width="284" height="213"><br>
<div id="portfolio" class="container-fluid text-center bg-grey">
  <h2>Result</h2><br>
  <div class="row text-center slideanim">
  </div>
</div>
</body>


    
<script>

function displayName(name){
    
    alert(name); 
}
 var cards = [];
function search() { 
   var apiUrl = "https://omgvamp-hearthstone-v1.p.mashape.com/cards?mashape-key=ClikMZBFwmmshpShNajq3Jb6564Zp1rfrCBjsn15xgY91vMxeO";
   var jqxhr = $.get(apiUrl, function(data) {
             if (data.length == 0)
                console.log("noResults");
             else
               console.log(data);
               loopCard(data);
          })
   .fail (function() {
              console.log("fail");
          });     
 }
function loopCard(data){
    //ingore credit debug hero skin mission promotion system tavern brawl

    var len = 0;
 
    $.each(data.Basic,function(i,entry){
        cards.push(data.Basic[i]); 
    });
    $.each(data['Blackrock Mountain'],function(i,entry){
        cards.push(data['Blackrock Mountain'][i]); 
    });
    $.each(data['Classic'],function(i,entry){
        cards.push(data['Classic'][i]); 
    });
    $.each(data['Goblins vs Gnomes'],function(i,entry){
        cards.push(data['Goblins vs Gnomes'][i]); 
    });

    $.each(data['Naxxramas'],function(i,entry){
        cards.push(data['Naxxramas'][i]); 
    });
    
    $.each(data['The Grand Tournament'],function(i,entry){
        cards.push(data['The Grand Tournament'][i]); 
    });

    $.each(data['The League of Explorers'],function(i,entry){
        cards.push(data['The League of Explorers'][i]); 
    });
    console.log(cards);
    displayCards(cards);
}
      var strHtml = "";
      var imgUrl;
      var numCardThisRow = 0;    
      var counter = 0;
function displayCards(cards){
    $.each(cards, function (i, entry) {
        
        imgUrl = "http://wow.zamimg.com/images/hearthstone/backs/original/Card_Back_Default.png";
        articleLinkText = "";
        articleUrl = "";
        if (cards[i].img){
             imgUrl = cards[i].img;
            counter++;
        
        //  start a new row for each three tiles
        
            if (numCardThisRow == 0) {
              strHtml += '<div class="row text-center slideanim slide">';
            }

            numCardThisRow++;


            strHtml += '<div class="col-sm-4">'
                        +   '<div class="thumbnail">'
                        +    '<img onclick="displayName(\''+ cards[i].name +'\')" id="card" src="'
                        +     imgUrl
                        +     '"alt="'
                        +     cards[i].name
                        +     '" width="400" height="300">'
                        +  '</div>'
                        + '</div>';

            if (numCardThisRow == 3) {    // close the row after each 3 movies
              strHtml += '</div>';
              numCardThisRow = 0;
            }  
        }
      });
      
      if (numCardThisRow != 0) {    // if !=0, we haven't closed the row div
          strHtml += '</div>';
      }  


      $("#portfolio .slideanim").after(strHtml);  
      console.log("total " + counter)
}
    
</script>
</html>
